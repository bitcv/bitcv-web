webpackJsonp([40],{"/GXt":function(t,a){},"SwJ/":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("Dd8w"),o=e.n(n),s=e("NYxO"),l={components:{VueQr:e("X2mQ").a},props:{orderData:Object},data:function(){return{isRecharge:!1,info:{total:3e4,cost:1699999,type:0,itype:1,BCVnumber:5e3,ETHnumber:6e3},recData:{address:"0xsajaiaksoalksidujh8093jd84kd9s0a9djhvu87"},assets:{BVC:2e3,EHT:378,BTC:288},tokenProtocol:1,assetList:[],walletAddr:"",balanceLoad:!1,rechareLoad:!1,loading:!1}},mounted:function(){this.fetchBalance()},updated:function(){console.log("update")},computed:{tokenData:function(){var t=this,a={};return console.log("tokendata"),this.assetList.forEach(function(e){parseInt(e.tokenId)===parseInt(t.orderData.tokenId)&&(a=e)},this),a},ethData:function(){var t={};return console.log("ethdata"),this.assetList.forEach(function(a){"ETH"===a.symbol&&(t=a)}),console.log(t),t},needTokenAmount:function(){var t=this.orderData.totalAmount-this.tokenData.amount;return t>0?t:0},needEthAmount:function(){var t=(.0016*(this.orderData.totalCount+1)*Math.pow(10,18)-this.ethData.amount*Math.pow(10,18))/Math.pow(10,18);return t>0?t:0}},methods:o()({},Object(s.b)(["getDispenseBalance","getDispenseWallet","confirmDispense"]),{fetchBalance:function(){var t=this;this.balanceLoad=!0,this.getDispenseBalance({tokenProtocol:this.tokenProtocol}).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.assetList=a.dataList,t.balanceLoad=!1})},handleChange:function(t){this.info.itype=0===t?1:0},handleRecharge:function(){var t=this;this.rechargeLoad=!0,this.getDispenseWallet({tokenProtocol:this.tokenProtocol}).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.walletAddr=a.walletAddr,t.isRecharge=!0,t.rechargeLoad=!1})},handleConfirm:function(){var t=this;this.loading=!0,this.confirmDispense({}).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.loading=!1,t.$emit("finished",{taskId:a.taskId})})},handleCopy:function(){this.$refs.copyInput.$el.firstElementChild.select(),document.execCommand("Copy"),this.$message.success("复制成功!")},handleRefresh:function(){this.fetchBalance()},handleFinished:function(){this.fetchBalance(),this.isRecharge=!1}})},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"step2"},[t.isRecharge?e("div",[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.rechareLoad,expression:"rechareLoad"}],staticClass:"recharge-top"},[e("el-row",[e("el-col",{staticClass:"left",attrs:{span:18}},[e("h5",[t._v("充值地址")]),t._v(" "),e("div",[e("el-input",{ref:"copyInput",attrs:{readonly:""},model:{value:t.walletAddr,callback:function(a){t.walletAddr=a},expression:"walletAddr"}}),t._v(" "),e("i",{staticClass:"el-icon-document",on:{click:t.handleCopy}})],1),t._v(" "),e("p",[t._v("\n          提示："),e("span",[t._v("单笔充值不得低于0.003"+t._s(t.tokenData.symbol))]),t._v("，\n            我们不会处理少于该金额的充值要求。\n          ")])]),t._v(" "),e("el-col",{staticClass:"right",attrs:{span:6}},[e("vue-qr",{staticClass:"qrcode",attrs:{text:t.walletAddr,margin:10}}),t._v(" "),e("p",[t._v("或扫二维码立即充值")])],1)],1)],1),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.balanceLoad,expression:"balanceLoad"}],staticClass:"recharge-bottom"},[e("h5",[t._v("\n        资产余额"),e("i",{staticClass:"el-icon-refresh",on:{click:t.handleRefresh}})]),t._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("span",[t._v(t._s(t.tokenData.amount))]),t._v(" "),e("small",[t._v(t._s(t.tokenData.symbol))])]),t._v(" "),e("el-col",{attrs:{span:12}},[e("span",[t._v(t._s(t.ethData.amount))]),t._v(" "),e("small",[t._v(t._s(t.ethData.symbol))])])],1),t._v(" "),e("el-row",[e("el-col",{attrs:{span:12}},[e("span",{staticStyle:{display:"block","font-size":"20px"}},[t._v("还需充值")]),t._v(" "),e("span",[t._v(t._s(t.needTokenAmount))]),t._v(" "),e("small",[t._v(t._s(t.tokenData.symbol))])]),t._v(" "),e("el-col",{attrs:{span:12}},[e("span",{staticStyle:{display:"block","font-size":"20px"}},[t._v("还需充值")]),t._v(" "),e("span",[t._v(t._s(t.needEthAmount))]),t._v(" "),e("small",[t._v(t._s(t.ethData.symbol))])])],1)],1),t._v(" "),e("footer",{staticClass:"recharge-footer"},[e("el-button",{staticClass:"btn-primary",attrs:{type:"warning"},on:{click:t.handleFinished}},[t._v("充值完成")])],1)]):e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.balanceLoad,expression:"balanceLoad"}],staticClass:"confirm"},[e("h5",[t._v("确认发放")]),t._v(" "),e("div",{staticClass:"confirm-box"},[e("div",{staticClass:"confirm-content"},[e("div",{staticClass:"confirm-top"},[e("el-row",[e("el-col",{attrs:{span:12}},[e("h6",[t._v("发币总量")]),t._v(" "),e("p",[e("img",{attrs:{src:t.tokenData.logoUrl,alt:"logo"}}),t._v(" "),e("b",[t._v(t._s(t.orderData.totalAmount))]),t._v(" "),e("small",[t._v(t._s(t.tokenData.symbol))])])]),t._v(" "),e("el-col",{attrs:{span:12}},[e("h6",[t._v("手续费")]),t._v(" "),e("p",[e("img",{attrs:{src:t.ethData.logoUrl,alt:"logo"}}),t._v(" "),e("b",[t._v(t._s(.0016*(t.orderData.totalCount+1)))]),t._v(" "),e("small",[t._v("ETH")])])])],1)],1),t._v(" "),e("div",{staticClass:"confirm-line"}),t._v(" "),e("div",{staticClass:"confirm-bottom"},[e("el-row",[e("el-col",{attrs:{span:12}},[e("h6",[t._v("可用"+t._s(t.tokenData.symbol)+"余额")]),t._v(" "),e("p",[e("img",{attrs:{src:t.tokenData.logoUrl,alt:"logo"}}),t._v(" "),e("span",[t._v(t._s(t.tokenData.amount))]),t._v(" "),e("small",[t._v("枚")]),t._v(" "),e("br"),t._v(" "),t.tokenData.amount<t.orderData.totalAmount?e("i",[t._v("余额不足，请先充值")]):t._e()])]),t._v(" "),e("el-col",{attrs:{span:12}},[e("h6",[t._v("可用ETH余额")]),t._v(" "),e("p",[e("img",{attrs:{src:t.ethData.logoUrl,alt:"logo"}}),t._v(" "),e("span",[t._v(t._s(t.ethData.amount))]),t._v(" "),e("small",[t._v("\n                  枚\n                ")]),t._v(" "),e("br"),t._v(" "),t.ethData.amount<.0016*(t.orderData.totalCount+1)?e("i",[t._v("余额不足，请先充值")]):t._e()])])],1)],1)]),t._v(" "),e("footer",{staticClass:"confirm-footer"},[e("el-button",{attrs:{type:"warning",plain:""},on:{click:t.handleRecharge}},[t._v("去充值")]),t._v(" "),e("el-button",{staticClass:"btn-primary",attrs:{type:"warning"},on:{click:t.handleConfirm}},[t._v("确认发放")])],1)])])])},staticRenderFns:[]};var r=e("VU/8")(l,i,!1,function(t){e("/GXt")},null,null);a.default=r.exports}});
//# sourceMappingURL=40.6ebd8dec5be54490ad4d.js.map