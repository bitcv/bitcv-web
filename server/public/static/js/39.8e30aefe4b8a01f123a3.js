webpackJsonp([39],{EdMG:function(t,e){},kZXB:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("Dd8w"),l=a.n(o),s=a("NYxO"),n={data:function(){return{formData:{isTest:0,tokenType:0,contractAddr:"",tokenId:0,tokenSymbol:""},formRule:{contractAddr:[{validator:function(t,e,a){/^0x[0-9a-fA-F]{40}$/.test(e)?a():a(new Error("请输入正确的ERC20合约地址！"))},trigger:"blur"}]},isUpload:!1,disableFile:!1,checked:!0,list:[],dataCount:0,uniqueCount:0,wrongCount:0,totalAmount:0,tokenType:0,uploadDisable:!0,tokenLoad:!1,selectLoad:!1,options:[{value:0,label:"ERC20"},{value:1,label:"ETH"}]}},watch:{"formData.tokenType":function(){var t=this;this.formData.tokenId=0,this.formData.tokenSymbol="",this.formData.contractAddr="",1===this.formData.tokenType&&(this.uploadDisable=!0,this.selectLoad=!0,this.getTokenBySymbol({tokenSymbol:"ETH"}).then(function(e){t.formData.tokenId=e.tokenId,t.formData.tokenSymbol=e.tokenSymbol,t.uploadDisable=!1,t.selectLoad=!1}))},checked:function(){this.checked?this.disableFile=!1:this.disableFile=!0}},methods:l()({},Object(s.b)(["addUserDispenseAsset","getTokenInfo","getTokenBySymbol"]),{handleBefore:function(t){if(!this.formData.tokenId)return this.$message.warn("请填写合约地址"),!1},open5:function(){this.$alert("本人同意使用代发宝业务进行数字货币转账，并承诺自行承担因此产生的风险，本人完全理解并同意接受如下条款：<br><br>1、发送方承诺并保证自行上传的发送资料中所有信息的真实性、准确性和合法性，并对此承担责任。<br><br> 2、如发送方上传的发送资料中，因资料错误、不完整，导致发送失败或者错误发送，由发送方承担责任，代发宝运营方无需承担任何责任。 <br><br>3、如因不可抗力导致服务中断（包括但不限于地震、战争、网络中断、网络攻击等），代发宝运营方无需承担任何责任代发宝在此声明，代发宝作为数字资产代发工具，并不实质性介入发送方与接收方的交易过程。代发宝的注册用户应对自己在代发宝充值的资产及一切转账行为承担责任，并承诺不以任何非法目的、不通过任何非法途径使用和推广代发宝。对于注册用户所有违背与代发宝服务相关的法律、法规及其他规范性文件的行为而造成的损失及后果，代发宝均不承担任何责任。","免责声明",{dangerouslyUseHTMLString:!0})},handleSuccess:function(t){0===t.errcode&&(this.isUpload=!0,this.list=t.data.dataList,this.dataCount=t.data.dataCount,this.totalAmount=t.data.totalAmount,this.wrongCount=t.data.wrongCount)},handleError:function(t){this.$message.error("上传失败，请重试")},fetchSample:function(){window.downloadFile("/static/file/sample.xls")},getToken:function(){var t=this;/^0x[0-9a-fA-F]{40}$/.test(this.formData.contractAddr)&&(this.uploadDisable=!0,this.tokenLoad=!0,this.getTokenInfo({contractAddr:this.formData.contractAddr}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.formData.tokenId=e.tokenId,t.formData.tokenSymbol=e.tokenSymbol,t.uploadDisable=!1,t.tokenLoad=!1}))},confirm:function(){var t=this;this.addUserDispenseAsset({tokenId:this.formData.tokenId}).then(function(){t.$emit("finished",{tokenId:t.formData.tokenId,totalAmount:t.totalAmount,totalCount:t.dataCount-t.wrongCount})})}})},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"step1"},[t.isUpload?a("div",[a("h4",[t._v("上传成功")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,height:"400"}},[a("el-table-column",{attrs:{type:"index"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",width:"400",label:"地址"}}),t._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"}})],1),t._v(" "),a("footer",{staticClass:"footer"},[a("el-row",[a("el-col",{attrs:{span:5}},[a("h5",[t._v("总数量")]),t._v(" "),a("div",[t._v(t._s(t.totalAmount)),a("small",[t._v("枚")])])]),t._v(" "),a("el-col",{attrs:{span:5}},[a("h5",[t._v("总地址")]),t._v(" "),a("div",[t._v(t._s(t.dataCount)),a("small",[t._v("条")])])]),t._v(" "),a("el-col",{attrs:{span:5}},[a("h5",[t._v("错误数据")]),t._v(" "),a("div",[t._v(t._s(t.wrongCount)),a("small",[t._v("条")])])]),t._v(" "),a("el-col",{staticClass:"text-center",attrs:{span:9}},[a("el-button",{staticClass:"btn-primary",attrs:{type:"warning"},on:{click:t.confirm}},[t._v("确定")]),t._v(" "),a("el-upload",{staticClass:"upload-btn",attrs:{name:"addr",action:"/api/parseAddrFile",data:t.formData,"before-upload":t.handleBefore,"on-success":t.handleSuccess,"on-error":t.handleError,"show-file-list":!1}},[a("el-button",{staticClass:"text-primary",attrs:{type:"text"}},[t._v("重新上传")])],1)],1)],1)],1)],1):a("el-form",{ref:"form",staticClass:"form",attrs:{model:t.formData,rules:t.formRule,"label-width":"100px"}},[a("el-form-item",[a("el-radio-group",{model:{value:t.formData.isTest,callback:function(e){t.$set(t.formData,"isTest",e)},expression:"formData.isTest"}},[a("el-radio",{attrs:{label:0}},[t._v("正式发放")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("测试发放"),a("small",{staticStyle:{color:"#ccc"}},[t._v("（测试时仅向前两个地址发放代币）")])])],1)],1),t._v(" "),a("el-form-item",{staticClass:"inline-item select-item",attrs:{label:"发放类别"}},[a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.selectLoad,expression:"selectLoad"}],attrs:{placeholder:"请选择"},model:{value:t.formData.tokenType,callback:function(e){t.$set(t.formData,"tokenType",e)},expression:"formData.tokenType"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),0===t.formData.tokenType?a("el-form-item",{staticClass:"inline-item input-item",attrs:{prop:"contractAddr"}},[0===t.tokenType?a("el-input",{staticClass:"step1-input",attrs:{placeholder:"请输入合约地址"},on:{blur:t.getToken},model:{value:t.formData.contractAddr,callback:function(e){t.$set(t.formData,"contractAddr",e)},expression:"formData.contractAddr"}},[a("i",{directives:[{name:"loading",rawName:"v-loading",value:t.tokenLoad,expression:"tokenLoad"}],attrs:{slot:"suffix"},slot:"suffix"},[t._v(t._s(t.formData.tokenSymbol))])]):t._e()],1):t._e(),t._v(" "),a("el-form-item",[a("el-checkbox",{staticStyle:{color:"#ccc"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}}),t._v(" "),a("el-button",{staticStyle:{color:"#ccc","font-size":"12px"},attrs:{type:"text"},on:{click:t.open5}},[t._v("用户协议")])],1),t._v(" "),a("el-form-item",{attrs:{label:"上传地址"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请输入合约地址",disabled:!t.uploadDisable,placement:"bottom"}},[a("el-upload",{staticClass:"upload-btn",attrs:{name:"addr",action:"/api/parseAddrFile","before-upload":t.handleBefore,"on-success":t.handleSuccess,"on-error":t.handleError,data:t.formData,disabled:t.uploadDisable,"show-file-list":!1}},[a("el-button",{staticClass:"btn-primary",attrs:{slot:"trigger",type:"warning",disabled:t.disableFile},slot:"trigger"},[t._v("点击上传")])],1)],1),t._v(" "),a("el-button",{attrs:{type:"warning",plain:""},on:{click:t.fetchSample}},[t._v("获取模板")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(n,r,!1,function(t){a("EdMG")},null,null);e.default=i.exports}});
//# sourceMappingURL=39.8e30aefe4b8a01f123a3.js.map